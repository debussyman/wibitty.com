Hello World.

This is the source code repository for my personal site.

During the fall of 2017 I relaunched my website, which had been a blank apache It Works! page for a few years. I had a few goals for the new site:
  * I wanted to learn some new(ish) web dev stuff - ES6, webpack, css grid. ES6 especially because I'm a big fan of coffeescript and want to see if the ES language updates were on par.
  * As a resident of New York City, I'm fairly obsessed by the subway transit system. The MTA makes some of their data available for free, so this seemed like a neat project.
  * Go serverless! I marvel at the fact that during my first job I went to the colo to plug in racks and configure hardware. And now even a virtual server is pass√©!

For the first part, I was up and running with a [nice tutorial](http://ccoenraets.github.io/es6-tutorial) fairly quickly. My original plan was to query the MTA feeds directly from the browser and plot them on a map. I found some nice map code with [leafletjs](http://leafletjs.com/) and an aesthetic map style with [thunderforest](https://www.thunderforest.com/maps/pioneer/). In one afternoon of hacking I had prototype of the site put together with fake trains moving around the map. Using S3 to statically host the site, I needed no servers to go live. Now to just plug in the data!

Unfortunately this part of the site proved to be much more complex than I imagined. The MTA provides their real-time feeds in the protobuf format. Each feed is rather large (&gt;100K) and I had a lot of trouble getting the browser to open and process the raw data. This was my first time really working with protobufs and I wasted a lot of time on a javascript solution. More concerning was that my software design had any browser using my MTA account credentials to access the data feeds, making the credentials open to the public (and probably a violation of the terms of the MTA APIs). So I decided to write a python script to consume the feeds and put a minimal version of the data available as json to be used by my site. I'm not super fluent with python or protobufs so this represented a bit of a learning curve. And to be serverless, I had to run this script as a Lambda function on AWS using a CloudWatch event trigger for scheduling.

After a few more nights and afternoons, I got a working solution together and online. Right now my Lambda function is running each minute and writing a JSON file to S3. My webpage queries that JSON every 30 seconds to update the map, and moves train icons around the map based on the scheduled arrivals, departures and stop geo coordinates. The data should be close to real-time! There are still some bugs - the biggest is that trains move in a straight line between stops which doesn't follow the actual paths. There are also phantom trains that appear on the map at times, so the data might not be perfected. Because the MTA does not provide train positions, they initialize at their next stop and wait to depart that stop which makes them look stuck.
